ESP32 轮腿平衡机器人产品使用说明书
版本号：V1.0 印刷日期：2024年XX月 页码：第1页，共X页

目录
1. 公司简介
2. 机器人快速上手指南
3. 机器人操作手册
   3.1 产品概述
   3.2 核心部件图示与说明
   3.3 手机APP蓝牙连接教程
   3.4 手机APP按键功能
   3.5 使用前准备
   3.6 基本操作
   3.7 安全注意事项
   3.8 电池维护
   3.9 常见问题
   3.10 技术支持
4. 产品发货附加说明
   4.1 包装清单
   4.2 保修政策
   4.3 收货与验收
   4.4 售后服务与反馈
5. 环保提示

---

## 1. 公司简介

矫捷（海南）智能机器人有限责任公司 致力于智能机器人技术的研究与开发，专注于为用户提供创新、高性能的机器人产品。我们拥有一支经验丰富的研发团队，将前沿科技融入产品设计，旨在提升用户体验，推动机器人技术在教育、娱乐和专业领域的应用。本产品是我们在轮腿平衡机器人领域的重要成果，融合了先进的控制算法和灵活的运动能力，希望能为您带来全新的智能体验。

---

## 2. 机器人快速上手指南
（适用于首次使用的用户，快速启动）

1.  **装电池**：将6S航模电池正确连接到机器人主电源接口，确保连接牢固。
2.  **开机**：拨动机器人电源开关，观察ESP32指示灯，等待系统初始化完成。
3.  **连接APP**：打开手机蓝牙，启动控制APP，搜索并连接名为"ESP32-WheelLeg"的设备。
4.  **简单操作**：连接成功后，即可通过APP上的摇杆控制机器人前进、后退、转向，通过按钮触发跳跃、起立、交叉步等动作。

---

## 3. 机器人操作手册

### 3.1 产品概述

ESP32 轮腿平衡机器人是一款集成了先进控制算法的智能机器人，具备以下核心特性：

#### 主要特点
- **双控制模式**：支持手机APP控制和自然语音控制
- **轮腿混合设计**：结合轮式移动和腿式运动的优势
- **自平衡系统**：基于MPU6050六轴传感器的实时姿态控制
- **跳跃功能**：具备动态跳跃能力，可越过障碍物
- **交叉步态**：支持复杂地形的适应性步态
- **实时控制**：50Hz高频控制更新，响应迅速

#### 技术规格
- **主控芯片**：ESP32-WROOM-32（双核240MHz）
- **传感器**：MPU6050六轴陀螺仪加速度计
- **电机系统**：6个无刷电机（4个关节电机 + 2个轮毂电机）
- **通信方式**：蓝牙5.0 + 串口通信
- **控制算法**：PID + LQR + VMC（虚拟模型控制）
- **电源系统**：6S航模锂电池（22.2V标称电压）
- **控制频率**：50Hz实时控制循环
- **工作温度**：-10°C ~ +60°C

---

### 3.2 核心部件图示与说明

#### 硬件组成

#### 主控系统
- **ESP32主控板**：负责整体控制逻辑和通信
- **MPU6050传感器**：提供实时姿态数据
- **CAN总线模块**：用于电机通信

#### 驱动系统
- **左腿关节电机 × 2**：控制左腿的髋关节和膝关节
- **右腿关节电机 × 2**：控制右腿的髋关节和膝关节  
- **左轮毂电机 × 1**：驱动左侧车轮
- **右轮毂电机 × 1**：驱动右侧车轮

#### 控制系统
- **PID控制器**：用于腿部角度和长度精确控制
- **LQR控制器**：实现整体平衡控制
- **VMC控制器**：虚拟模型控制，实现腿部运动学转换

#### 通信模块
- **蓝牙模块**：连接手机APP
- **串口模块**：接收语音控制指令

---

### 3.3 手机APP蓝牙连接教程

1.  **确保机器人电源开启**：拨动机器人电源开关，等待系统初始化完成。
2.  **打开手机蓝牙功能**：在您的智能手机设置中开启蓝牙。
3.  **启动控制APP**：打开您已安装的机器人控制APP。
4.  **搜索并连接设备**：在APP中搜索蓝牙设备，找到并选择名为"Bot"的设备进行连接。
5.  **连接成功提示**：连接成功后，APP界面会显示连接状态，机器人可能会发出提示音。

---

### 3.4 手机APP按键功能

手机APP提供直观的控制界面，包含以下控制元素：

#### 摇杆控制区域
- **左摇杆**：控制机器人前进/后退和左右转向
  - 上推：前进
  - 下拉：后退  
  - 左推：左转
  - 右推：右转
  - 中心位置：停止

#### 功能按钮区域
- **跳跃按钮**：触发机器人跳跃动作，可越过小型障碍物
- **起立按钮**：从倒地状态恢复到直立平衡状态
- **交叉步按钮**：启用/禁用交叉步态模式，适用于复杂地形

#### 腿长控制区域
- **腿长滑动条**：实时调节机器人腿部长度
  - 向上滑动：增加腿长，提高离地间隙
  - 向下滑动：减少腿长，降低重心
  - 范围：0.05m ~ 0.25m

#### 语音控制指令
- **"FORWARD"**：向前移动
- **"BACKWARD"**：向后移动  
- **"LEFT"**：左转
- **"RIGHT"**：右转
- **"STOP"**：停止所有运动
- **"JUMP"**：执行跳跃动作
- **"STANDUP"**：执行起立动作
- **"CROSSLEG"**：切换交叉步态
- **"INCREASELEGLENGTH"**：增加腿长
- **"DECREASELEGLENGTH"**：减少腿长

---

### 3.5 使用前准备

#### 硬件检查
1.  **电池电量检查**
    - 确认6S航模电池电量充足（建议不低于50%）
    - 检查电池连接是否牢固
    - 确认电池电压在正常范围内（19.2V-25.2V）

2.  **机械结构检查**
    - 检查所有关节是否灵活
    - 确认车轮转动正常
    - 检查线缆连接无松动

3.  **传感器校准**
    - 将机器人放置在平坦表面
    - 保持静止状态进行IMU校准
    - 等待校准完成提示

#### 软件准备
1.  **APP安装**
    - 确保已在手机上安装最新版本的机器人控制APP。

2.  **语音控制准备**
    - 确保串口通信正常（如需使用语音模块）
    - 测试语音识别模块连接
    - 验证指令解析功能

#### 环境准备
1.  **操作空间**
    - 确保周围有足够的活动空间（建议3m×3m以上）
    - 清除地面障碍物
    - 确保地面相对平整

2.  **安全措施**
    - 准备急停开关或断电方式
    - 确保周围无易碎物品
    - 建议初次使用时有人员监护

---

### 3.6 基本操作

#### 开机启动
1.  **连接电池**
    - 将6S航模电池连接到机器人主电源接口
    - 确认连接牢固，注意正负极

2.  **系统启动**
    - 观察ESP32指示灯，等待系统初始化完成
    - 听到蜂鸣器提示音表示启动成功

3.  **连接控制设备**
    - 打开手机蓝牙
    - 启动控制APP并连接机器人
    - 连接成功后APP界面会显示连接状态

#### APP控制操作

#### 基本移动
1.  **前进/后退**
    - 使用左摇杆上下推拉控制
    - 推拉幅度决定移动速度
    - 松开摇杆自动停止

2.  **转向控制**
    - 使用左摇杆左右推拉控制转向
    - 可与前进/后退同时操作实现弧线运动

3.  **腿长调节**
    - 拖动腿长滑动条调节
    - 实时生效，可在运动中调节
    - 建议根据地形选择合适腿长

#### 特殊功能
1.  **跳跃功能**
    - 点击跳跃按钮触发
    - 适用于越过小型障碍物
    - 跳跃过程中避免其他操作

2.  **起立功能**
    - 机器人倒地时使用
    - 点击起立按钮执行起立序列
    - 等待动作完成后再进行其他操作

3.  **交叉步态**
    - 点击交叉步按钮启用/禁用
    - 适用于复杂地形和障碍物
    - 启用后移动速度会相应调整

#### 语音控制操作
1.  **发送指令**
    - 通过串口发送标准指令（如连接了语音识别模块）
    - 指令格式：指令名称 参数1 参数2 (例如："FORWARD 50 2000"表示50%速度前进2秒)

2.  **队列控制**
    - 可连续发送多个指令
    - 系统会按顺序执行
    - 使用"STOP"指令可中断执行

#### 状态监控
1.  **实时数据**
    - 通过串口监控机器人状态（如连接了调试终端）
    - 包括姿态角度、速度、电机状态等
    - 建议使用115200波特率

2.  **异常处理**
    - 如发现异常倾斜，立即停止操作
    - 检查传感器数据是否正常
    - 必要时重启系统

---

### 3.7 安全注意事项

#### 操作安全
1.  **人员安全**
    - 操作时保持安全距离（建议1米以上）
    - 避免在机器人运动路径上放置身体部位
    - 儿童使用时必须有成人监护

2.  **设备安全**
    - 避免在高处或楼梯附近操作
    - 不要让机器人接触水或潮湿环境
    - 避免在极端温度环境下使用

3.  **紧急处理**
    - 遇到异常情况立即断电
    - 准备急停开关或控制APP上的停止功能
    - 不要用手直接阻止机器人运动

#### 电气安全
1.  **电源管理**
    - 使用原装或兼容的电池
    - 避免电池过度放电
    - 充电时使用合适的充电器

2.  **线路保护**
    - 定期检查线缆是否磨损
    - 避免线缆被挤压或拉扯
    - 保持连接器清洁干燥

#### 机械安全
1.  **运动部件**
    - 注意旋转的车轮和摆动的腿部
    - 不要在运动时触摸关节部位
    - 定期检查机械连接是否牢固

2.  **维护安全**
    - 维护前务必断电
    - 使用合适的工具
    - 不要随意拆卸核心部件

---

### 3.8 电池维护

#### 6S航模电池使用指南

#### 电池规格
- **电池类型**：6S锂聚合物电池（LiPo）
- **标称电压**：22.2V（单节3.7V × 6）
- **充电电压**：25.2V（单节4.2V × 6）
- **放电截止电压**：19.2V（单节3.2V × 6）
- **建议容量**：3000mAh以上

#### 充电注意事项
1.  **使用专用充电器**
    - 必须使用6S平衡充电器
    - 设置正确的电池类型（LiPo）
    - 充电电流不超过1C（如3000mAh电池，充电电流≤3A）

2.  **充电环境**
    - 在通风良好的环境中充电
    - 远离易燃物品
    - 充电时有人看管
    - 使用防火袋或充电箱

3.  **充电流程**
    - 连接平衡充电线和主电源线
    - 设置充电参数（电池类型、容量、电流）
    - 开始充电并监控过程
    - 充电完成后及时断开

#### 使用注意事项
1.  **电压监控**
    - 使用前检查电池电压
    - 单节电压不低于3.6V
    - 总电压不低于21.6V
    - 发现电压异常立即停止使用

2.  **放电管理**
    - 避免过度放电
    - 单节电压不低于3.2V
    - 长期不用时保持存储电压（3.8V/节）

3.  **温度控制**
    - 使用中电池温度不超过60°C
    - 发现电池发热立即停止使用
    - 充电时电池温度不超过45°C

#### 存储保养
1.  **短期存储（1周内）**
    - 可保持满电状态
    - 存放在阴凉干燥处

2.  **长期存储（1周以上）**
    - 将电池放电至存储电压（3.8V/节，总电压22.8V）
    - 每月检查一次电压
    - 必要时进行补充充电

3.  **存储环境**
    - 温度：5°C-25°C
    - 湿度：<60%
    - 避免阳光直射
    - 远离热源和金属物品

#### 安全警告
- 电池损坏、鼓包、漏液时立即停止使用
- 不要短路电池正负极
- 不要拆解或改装电池
- 废旧电池请送至专业回收点处理

---

### 3.9 常见问题

#### 连接问题
**问题**：手机APP无法连接机器人？
**解决方案**：
1.  确认机器人电源已开启
2.  检查手机蓝牙功能是否开启
3.  重启APP并重新搜索设备
4.  尝试清除APP缓存或重新安装
5.  检查是否有其他设备占用连接

**问题**：连接后控制无响应？
**解决方案**：
1.  检查APP界面是否显示连接状态
2.  重新启动机器人系统
3.  检查蓝牙信号强度，靠近机器人操作
4.  重新配对连接

**问题**：语音指令无响应？
**解决方案**：
1.  检查串口连接是否正常
2.  确认波特率设置为115200
3.  验证指令格式是否正确
4.  检查指令队列是否已满

#### 运动问题
**问题**：机器人无法保持平衡？
**解决方案**：
1.  检查IMU传感器是否正常工作
2.  重新校准IMU偏置参数
3.  确认地面是否平整
4.  检查电机是否正常响应

**问题**：动作执行不准确？
**解决方案**：
1.  检查电机校准参数
2.  验证关节角度是否正确
3.  确认电池电量是否充足
4.  重新校准电机零位

#### 系统问题
**问题**：系统启动异常？
**解决方案**：
1.  检查电源连接是否牢固
2.  观察串口输出的错误信息
3.  尝试重新烧录固件
4.  检查硬件连接是否正确

**问题**：电机不转或异响？
**解决方案**：
1.  检查CAN总线连接
2.  验证电机ID设置
3.  检查电机供电是否正常
4.  确认电机参数配置

#### 性能问题
**问题**：响应速度慢？
**解决方案**：
1.  检查控制频率设置
2.  优化代码执行效率
3.  确认系统负载是否过高
4.  检查通信延迟

**问题**：电池续航时间短？
**解决方案**：
1.  检查电池健康状态
2.  优化控制算法减少功耗
3.  降低不必要的高频动作
4.  考虑更换大容量电池

#### 电源问题
**问题**：机器人无法开机
**解决方案**：
1.  检查6S电池电压是否正常（应≥19.2V）
2.  确认电池连接线接触良好
3.  检查电源开关是否正常
4.  检查主电路保险丝是否烧断

**问题**：运行中突然断电
**解决方案**：
1.  检查电池电量，及时充电
2.  检查电池连接是否松动
3.  检查是否因过载触发保护
4.  检查电池是否过热

---

### 3.10 技术支持

#### 联系方式
- **技术支持邮箱**：liouseric@163.com
- **官方网站**：无
- **用户论坛**：无
- **技术文档**：无

#### 支持内容
1.  **软件支持**
    - 固件更新和升级
    - 参数调优指导
    - 算法优化建议
    - 自定义功能开发

2.  **硬件支持**
    - 硬件故障诊断
    - 配件更换指导
    - 升级改装建议
    - 维修服务

3.  **学习资源**
    - 技术原理讲解
    - 开发教程和示例
    - 视频教学材料
    - 社区交流平台

#### 保修政策
- **保修期限**：自购买日起12个月
- **保修范围**：硬件质量问题和制造缺陷
- **不保修项目**：人为损坏、改装、正常磨损
- **维修流程**：联系客服 → 故障诊断 → 寄回维修 → 测试发回

#### 开源信息
本产品基于开源硬件和软件开发：
- **硬件设计**：基于ESP32开源方案
- **软件代码**：部分代码开源，可在GitHub获取
- **开发工具**：PlatformIO + Arduino框架
- **社区贡献**：欢迎提交改进建议和代码

---

## 4. 产品发货附加说明

### 4.1 包装清单
- **ESP32 轮腿平衡机器人主机**：1台
- **6S航模锂电池**：1块
- **产品使用说明书**：1本
- **保修卡**：1张

### 4.2 保修政策
- **保修期限**：自购买之日起，享受1年免费保修服务。
- **保修范围**：非人为损坏的核心部件故障。
- **不保修范围**：人为操作不当导致的损坏（如摔落、进水、私自拆解）；使用非原装配件引发的故障；超过保修期限的产品问题；正常使用导致的外观磨损。
- **保修流程**：联系技术支持 → 提供产品信息和故障描述 → 确认保修资格 → 寄回设备 → 维修后寄回。

### 4.3 收货与验收
- **包装检查**：收到包裹后，请检查外包装是否有破损、挤压或受潮痕迹。如有异常，请拍照留证并及时联系物流公司和客服。
- **配件核对**：拆封后，请对照包装清单核对所有物品数量和型号是否正确，并检查机器人外观是否有划痕、变形，配件是否完好。
- **问题反馈**：如发现产品缺失、损坏或配件不全，请在收货后48小时内联系客服，并提供相关照片和购买凭证。

### 4.4 售后服务与反馈
- **售后支持**：如在使用过程中遇到任何问题，或对产品有任何疑问，请通过技术支持联系方式与我们取得联系。
- **反馈渠道**：我们欢迎您对产品功能、服务质量提出宝贵建议。您可以通过邮箱或官方渠道提交反馈。

---

## 5. 环保提示

- **产品包装**：本产品的包装材料（如纸箱、内衬）均为可回收材料，请在废弃时进行分类回收，减少环境污染。
- **电池回收**：锂电池属于有害垃圾，请勿随意丢弃。废弃的电池应送至专业的电池回收点或按照当地法规进行处理，避免对环境造成危害。
- **产品报废**：当机器人达到使用寿命并需要报废时，请勿随意丢弃。建议联系我们或专业的电子产品回收机构，对可回收部件进行处理，践行绿色环保理念。

---

**注意**：本说明书基于当前固件版本编写，不同版本可能存在功能差异。使用前请确认固件版本并查阅对应文档。

**版权声明**：本产品及说明书受知识产权保护，未经授权不得商业使用。

**最后更新**：2024年12月